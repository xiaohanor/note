---
title: 大小写字符转换
---
### 总结 \[#总结]

* 大写变小写、小写变大写 : 字符 ^= 32;
* 大写变小写、小写变小写 : 字符 |= 32;
* 小写变大写、大写变大写 : 字符 &= -33;

### 按位或运算符 (`|` 和 `|=`) \[#按位或运算符--和-]

* `|` 是按位或运算符，对应位为1则结果位为1，否则为0。
* `|=` 是按位或赋值运算符，将变量与某个值进行按位或运算，并将结果存储在该变量中。

### ASCII字符编码 \[#ascii字符编码]

* 大写字母 `'A'` 到 `'Z'` 的ASCII码范围是65到90（即 `01000001` 到 `01011010`）。
* 小写字母 `'a'` 到 `'z'` 的ASCII码范围是97到122（即 `01100001` 到 `01111010`）。

观察可以发现，小写字母与对应的大写字母之间的唯一差异是第5位（32）：

* `'A'` 的二进制： `01000001`
* `'a'` 的二进制： `01100001`

第5位的二进制值是32（即 `00100000`），所以将大写字母转换为小写字母只需要将第5位设置为1。

### `i |= 32;` 的具体操作 \[#i--32-的具体操作]

假设 `i` 是一个大写字母，例如 `'A'`：

1. **字符 `'A'` 的ASCII值和二进制表示**：
   * ASCII值：65
   * 二进制： `01000001`

2. **数字32的二进制表示**：
   * 二进制： `00100000`

3. **按位或运算**：
   * `i | 32`:
     ```
     01000001  (65, 'A')
     ```
   | 00100000  (32,  ' ')

通过以上运算，将字符 `'A'` 转换为了字符 `'a'`。

### 适用于其他大写字母 \[#适用于其他大写字母]

对于其他大写字母，同样适用：

* `'B'` 的二进制： `01000010`
* 按位或32： `01000010 | 00100000` = `01100010`，即 `'b'`

### 完整示例代码 \[#完整示例代码]

```cpp
#include <iostream>
#include <string>

std::string toLowerCase(std::string str) {
    for(auto &i : str) {
        if (i >= 'A' && i <= 'Z') { // 只转换大写字母
            i |= 32;
        }
    }
    return str;
}

int main() {
    std::string s = "HeLLo WoRLD!";
    std::string lowerCaseString = toLowerCase(s);
    std::cout << "Original string: " << s << std::endl;
    std::cout << "Lower case string: " << lowerCaseString << std::endl;
    return 0;
}
```

### 总结 \[#总结]

`i |= 32;` 通过设置第5位为1，将大写字母转换为对应的小写字母。这种位运算方式高效且简洁，但要注意它只适用于ASCII字符，并且只对字母有效，其他字符不受影响。如果字符不是大写字母，运算结果也不会影响原字符。
