---
title: 析构函数
---
析构函数（Destructor）是一个特殊的成员函数，用于**在对象生命周期结束时进行资源的释放和清理工作。** 它的名称由波浪号 `~` 后跟类名组成，没有返回类型，也不接受任何参数。在对象生命周期结束时（例如对象离开作用域、被 `delete` 释放或程序退出时），析构函数会自动被调用。

析构函数通常用于执行以下任务：

1. 释放动态分配的内存：如果在对象的生命周期内分配了动态内存（使用 `new` 运算符），析构函数通常用于释放这些内存，防止内存泄漏。

2. 关闭打开的文件或释放其他资源：如果对象持有文件句柄、数据库连接或其他类似的资源，析构函数可以用于关闭文件、释放连接等操作。

3. 清理其他资源：可能还有其他需要在对象销毁时进行的清理工作，例如释放对象持有的其他对象的引用。

以下是一个简单的示例，展示了一个类中的析构函数的用法：

```cpp
#include <iostream>

class MyClass {
public:
    // 构造函数
    MyClass() {
        std::cout << "Constructor called\n";
    }

    // 析构函数
    ~MyClass() {
        std::cout << "Destructor called\n";
    }
};

int main() {
    // 创建对象
    MyClass obj;

    // 对象离开作用域，析构函数自动调用
    std::cout << "Object is about to be destroyed\n";

    return 0;
} // 在此处对象离开作用域，析构函数被调用
```

在上面的示例中，`MyClass` 类包含了一个构造函数和一个析构函数。当程序执行到 `return 0;` 之前，`MyClass` 对象 `obj` 离开了作用域，因此析构函数被自动调用。
